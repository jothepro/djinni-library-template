<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="generator" content="Doxygen 1.9.1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- BEGIN opengraph metadata -->
    <meta property="og:title" content="Djinni Library Template" />
    <meta property="og:description" content="A basic Djinni library project template utilizing CMake and Conan." />
    <meta property="og:url" content="https://github.com/jothepro/djinni-library-template" />
    <!-- END opengraph metadata -->
    <!-- BEGIN twitter metadata -->
    <meta name="twitter:title" content="Djinni Library Template" />
    <meta name="twitter:description" content="A basic Djinni library project template utilizing CMake and Conan." />
    <!-- END twitter metadata -->
    <title>Djinni Library: Djinni Library</title>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <link rel="icon" type="image/svg+xml" href="logo.svg">
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/jothepro/djinni-library-template" class="github-corner" title="View source on GitHub">
    <svg viewBox="0 0 250 250" style="position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
            <tbody>
            <tr style="height: 56px;">
                <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
                <td id="projectalign" style="padding-left: 0.5em;">
                    <div id="projectname">Djinni Library
                        &#160;<span id="projectnumber">v0.0.17</span>
                    </div>
                    <div id="projectbrief">Template Utilizing CMake and Conan</div>
                </td>
                <td valign=bottom id="languageselect">
                    <select name="Target Language" id="language_selector">
                        <option id="option_empty" selected></option>
                        <option  value="java" id="target_lang_java">Java</option>
                        <option value="objc" id="target_lang_objc">ObjC</option>
                        <option value="cppcli" id="target_lang_cppcli">C++/CLI</option>
                        <option value="cpp" id="target_lang_cpp">C++</option>
                    </select>
                    <script>
                        let pathElements = new URL(window.location.href).pathname.split("/")
                        let currentLanguage = pathElements[pathElements.length - 2]
                        var language_select = document.getElementById('language_selector')
                        language_select.value = currentLanguage
                        document.getElementById('option_empty').remove()
                        language_select.onchange = function(e) {
                            window.location = '../' + this.value + '/annotated.html';
                            language_select.value = currentLanguage
                        }
                    </script>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Djinni Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> A template for a Djinni library that can be used in Java/Kotlin on Android, ObjC/Swift on iOS/macOS and C# on Windows.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Features</h1>
<ul>
<li>ğŸ§â€â™‚ï¸ Develop your library once in C++, use it in Code written in Java, C++/CLI (.NET 5) or Swift thanks to <a href="https://djinni.xlcpp.dev/">Djinni</a>.</li>
<li>ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ Can build &amp; bundle binaries for<ul>
<li>macOS, iOS (XCFramework)</li>
<li>Android (AAR)</li>
<li>Windows .NET 5.0 (NuGet)</li>
<li>Linux</li>
</ul>
</li>
<li>ğŸ£ Dependency Management with Conan</li>
<li>ğŸ§¶ Easy to use CLI to configure build output for different platforms</li>
<li>ğŸ“‘ Building Doxygen docs for all target languages</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
How to use this template</h1>
<ul>
<li>Create a new repository using this template.</li>
<li>Make sure you understand how to use it in your project &amp; how to build &amp; run for development before you change something.</li>
<li>Search for all occurrences of "MyDjinniLibrary", "DjinniLibrary", "My" in the project to replace all ocurrences of the template target and/or namespaces. You can ignore anything inside <code>lib/djinni-generated</code>, as it will be updated by Djinni automatically.</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Installation</h1>
<ul>
<li>Android: <a href="https://github.com/jothepro/djinni-library-template/packages/881665">my.djinnilibrary.mydjinnilibrary (Maven)</a></li>
<li>Windows: <a href="https://github.com/jothepro/djinni-library-template/packages/881693">MyDjinniLibrary (NuGet)</a></li>
<li>Darwin: <a href="https://github.com/jothepro/djinni-library-template-swiftpackage">djinni-library-template-swiftpackage (Swift Package)</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Development</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
Build Requirements</h2>
<ul>
<li><a href="https://conan.io/">Conan</a> &gt;= 1.36</li>
<li><a href="https://cmake.org/">CMake</a> &gt;= 3.15</li>
<li><a href="https://www.python.org/">Python</a> &gt;= 3.5</li>
<li><a href="https://www.doxygen.nl/index.html">Doxygen</a> &gt;= 1.9.1 (optional)</li>
</ul>
<h3><a class="anchor" id="autotoc_md6"></a>
Android (Java)</h3>
<ul>
<li>Android NDK</li>
<li>Separate installations of:<ul>
<li>Java 8</li>
<li>Java 11</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md7"></a>
Windows (C++/CLI)</h3>
<ul>
<li><a href="https://docs.microsoft.com/en-us/nuget/install-nuget-client-tools#nugetexe-cli">Nuget CLI</a> &gt;= 5.9</li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/windows/?view=vs-2019">Visual Studio 16 2019</a><ul>
<li>.NET 5.0 Runtime</li>
<li>.NET SDK</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Build</h2>
<h3><a class="anchor" id="autotoc_md9"></a>
Pure C++ build</h3>
<p>During development, building the C++-Code and running tests can be done as usual in a C++ project with Conan:</p>
<ul>
<li><b>Commandline:</b> <div class="fragment"><div class="line"> # Create build folder for out-of-source build</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line"># Install Dependencies with Conan</div>
<div class="line">conan install ..</div>
<div class="line"># Configure, Build &amp; Test</div>
<div class="line">conan build ..</div>
</div><!-- fragment --></li>
<li><b>Clion:</b> Install the <a href="https://plugins.jetbrains.com/plugin/11956-conan">Conan Plugin</a> before configuring &amp; building the project as usual.</li>
</ul>
<h3><a class="anchor" id="autotoc_md10"></a>
Building for use in another Language</h3>
<p>The <code>build.py</code> CLI helps you to easily build &amp; package the library for usage in another language, without having to know what is going on under the hood.</p>
<p>For details on what the various parameters of the CLI do, please consult <code>./build.py --help</code>.</p>
<p>All build outputs generated by <code>build.py</code> will be written to <code>./build/</code> by default. You can overwrite the build directory with the <code>--build-directory</code> parameter.</p>
<p>Before running <code>build.py</code> for the first time, install the Python dependencies: </p><div class="fragment"><div class="line">pip3 install -r requirements.txt</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md11"></a>
Building an Android AAR</h4>
<p>When building for Android, Java 11 is required. In addition to that you need to provide the NDK that you want to build with as environment variable <code>ANDROID_NDK_HOME</code>. </p><div class="fragment"><div class="line">export ANDROID_NDK_HOME=/path/to/your/ndk/22.0.6917172</div>
<div class="line">./build.py --android x86_64 armv8 --package aar</div>
</div><!-- fragment --><p>This results in an Android Library (AAR) that contains both the Java-Gluecode required to call the native Library and the binaries for both <code>x86_64</code> (for the emulator) &amp; <code>arm64-v8a</code> (for the real hardware) architectures.</p>
<h4><a class="anchor" id="autotoc_md12"></a>
Building an XCFramework for iOS/macOS</h4>
<p>All binaries for iOS/macOS will be combined into one big XCFramework, for easy referencing in any Swift/Objective-C project. Note that for iOS two different platforms need to be targeted: The simulator and the real iPhone hardware:</p>
<div class="fragment"><div class="line">./build.py --iphoneos armv8 --iphonesimulator x86_64 armv8 --macos x86_64 armv8 --package xcframework</div>
</div><!-- fragment --><p>This results in an XCFramework that contains binaries for</p>
<ul>
<li>real iPhones (iOS)</li>
<li>the iPhone Simulator (iOS) for both Intel &amp; Apple silicon (ARM) architectures.</li>
<li>macOS for both Intel &amp; Apple silicon (ARM) architectures.</li>
</ul>
<h4><a class="anchor" id="autotoc_md13"></a>
Building a .NET 5 NuGet package</h4>
<div class="fragment"><div class="line">./build.py --windows x86_64 x86 armv8 --package nuget</div>
</div><!-- fragment --><p>This results in a NuGet package that contains binaries for 3 different architectures (<code>x86_64</code>, <code>x86</code> and <code>arm64</code>). The NuGet package makes it easy for you to include the library in a .NET 5 project without having to worry about what <code>dll</code> to include for which architecture in the build process.</p>
<p><b>Attention</b>: If you encounter the following error message when building a project that references the NuGet package, don't panic! </p><blockquote class="doxtable">
<p>Error MSB3270 There was a mismatch between the processor architecture of the project being built "x86" and the processor architecture of the reference "MyDjinniLibrary", "AMD64". This mismatch may cause runtime failures. Please consider changing the targeted processor architecture of your project through the Configuration Manager so as to align the processor architectures between your project and references, or take a dependency on references with a processor architecture that matches the targeted processor architecture of your project. </p>
</blockquote>
<p>You can just ignore it, it's a false positive! The NuGet package comes with logic that will indeed package the right <code>dll</code> during build time. Disable the warning in the projects <code>.csproj</code> file by adding: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">Project</span> <span class="keyword">Sdk</span>=<span class="stringliteral">&quot;Microsoft.NET.Sdk&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">PropertyGroup</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch</span>&gt;</div>
<div class="line">       <span class="keyword">None</span></div>
<div class="line">    &lt;/<span class="keywordtype">ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">PropertyGroup</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">Project</span>&gt;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md14"></a>
Test</h2>
<p>The library comes preconfigured for Unit-Testing with Catch2:</p>
<ul>
<li><b>Commandline:</b> To run just the unit-tests, you can run <code>conan build .. --test</code>.</li>
<li><b>CLion:</b> Execute the <code>MyDjinniLibraryTest</code> target</li>
</ul>
<p>Building &amp; executing tests is <b>not supported on Windows</b>!</p>
<h2><a class="anchor" id="autotoc_md15"></a>
Documentation</h2>
<p>The repository comes with 4 different doxygen configurations, each is for a different target language:</p><ul>
<li><code>Doxyfile-Cpp</code>: Documents the C++ interfaces that will be exposed for all the languages. They can also be used directly in a C++ project, e.g. for targeting Linux with <code>gtkmm</code>.</li>
<li><code>Doxyfile-CppCli</code>: Documents the C++/CLI gluecode for targeting Windows .NET 5</li>
<li><code>Doxyfile-Java</code>: Documents the Java gluecode for targeting Android</li>
<li><code>Doxyfile-ObjC</code>: Documents the Objective-C gluecode for targeting iOS/macOS</li>
</ul>
<p>All Doxyfiles depend on code generated by Djinni, located in <code>lib/djinni-generated</code>. To ensure that the required files are present, the best way to generate the docs is with the <code>build.py</code> CLI when building for a specific platform anyways with the <code>--render-docs</code> parameter: </p><div class="fragment"><div class="line"># This will generate the docs for C++, Java &amp; Objective-C</div>
<div class="line">./build.py --render-docs --android x86_64 --macos x86_64 </div>
</div><!-- fragment --><p>The resulting documentation can be found under <code>docs/generated/html</code>.</p>
<h2><a class="anchor" id="autotoc_md16"></a>
Project Structure</h2>
<div class="fragment"><div class="line">.</div>
<div class="line">â”œâ”€â”€ CMakeLists.txt               : Root `CMakeLists.txt`. Includes Library sources and unit tests.</div>
<div class="line">â”œâ”€â”€ Doxyfile-Cpp                 : Doxyfile for the C++ interface that is generated with Djinni from `my_djinni_library.djinni`.</div>
<div class="line">â”œâ”€â”€ Doxyfile-CppCli              : Doxyfile for the generated C++/CLI interface.</div>
<div class="line">â”œâ”€â”€ Doxyfile-Java                : Doxyfile for the generated Java interface.</div>
<div class="line">â”œâ”€â”€ Doxyfile-ObjC                : Doxyfile for the generated Objective-C interface.</div>
<div class="line">â”œâ”€â”€ LICENSE                      : License file.</div>
<div class="line">â”œâ”€â”€ README.md                    : The document that you read right now.</div>
<div class="line">â”œâ”€â”€ build.py                     : Build script that automates building &amp; packaging the binaries for all the supported platforms.</div>
<div class="line">â”œâ”€â”€ cmake</div>
<div class="line">â”‚   â”œâ”€â”€ modules</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ GetVersion.cmake     : CMake module that reads the current project version from a temporary `VERSION` file that </div>
<div class="line">â”‚   â”‚   â”‚                          is created by Conan during the install phase or from the git repository if no `VERSION` file can be found.</div>
<div class="line">â”‚   â”‚   â””â”€â”€ djinni-cmake         : CMake module that introduces the `add_djinni_library` function to configure the Djinni library.</div>
<div class="line">â”‚   â”‚       â””â”€â”€ ...</div>
<div class="line">â”‚   â””â”€â”€ toolchains </div>
<div class="line">â”‚       â””â”€â”€ android_toolchain.cmake : CMake toolchain that is required if building for Android. </div>
<div class="line">â”‚                                     This toolchain is passed to Conan in `build.py` when building for Android.</div>
<div class="line">â”œâ”€â”€ conan</div>
<div class="line">â”‚   â””â”€â”€ profiles                 : Folder containing Conan profiles for all supported target platforms (`android`, `ios`, `macos`, `windows`).</div>
<div class="line">â”‚       â””â”€â”€ ...                    These profiles are used by `build.py` () to configure the CMake targets accordingly.</div>
<div class="line">â”œâ”€â”€ conanfile.py                 : Conanfile for installing dependencies &amp; defining the library itself as Conan package.</div>
<div class="line">â”œâ”€â”€ docs</div>
<div class="line">â”‚   â”œâ”€â”€ doxygen-awesome-css      : Submodule of the `doxygen-awesome-css` doxygen theme.</div>
<div class="line">â”‚   â”‚   â””â”€â”€ ...</div>
<div class="line">â”‚   â”œâ”€â”€ doxygen-custom           : Doxygen customization (CSS &amp; html)</div>
<div class="line">â”‚   â”‚   â””â”€â”€ ...</div>
<div class="line">â”‚   â”œâ”€â”€ generated</div>
<div class="line">â”‚   â”‚   â””â”€â”€ html                 : Folder that Doxygen will write the generated html documentation to.</div>
<div class="line">â”‚   â”‚       â”œâ”€â”€ index.html       : Entrypoint for the Doxygen documentation.</div>
<div class="line">â”‚   â”‚       â””â”€â”€ ...                Each target language is documented in a sub-folder in an entirely separate doxygen Website.</div>
<div class="line">â”‚   â”œâ”€â”€ idl.dox                  : Doxygen page that includes the Djinni IDL file used to generate the documented interfaces.</div>
<div class="line">â”‚   â””â”€â”€ img                      : Image resources for Doxygen</div>
<div class="line">â”‚       â””â”€â”€ ...</div>
<div class="line">â”œâ”€â”€ lib                          : Folder containing library sources.</div>
<div class="line">â”‚   â”œâ”€â”€ CMakeLists.txt           : `CMakeLists.txt` that defines the library target and links it to the djinni-support-lib</div>
<div class="line">â”‚   â”œâ”€â”€ djinni-generated         : The djinni generator will write the generated interfaces for each language into this folder.</div>
<div class="line">â”‚   â”‚   â””â”€â”€ ...</div>
<div class="line">â”‚   â”œâ”€â”€ my_djinni_library.djinni : Djinni interface definition language file that defines the libraries interface.</div>
<div class="line">â”‚   â”œâ”€â”€ platform</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ android              : Android Studio project that is used to build the Android Library (AAR).</div>
<div class="line">â”‚   â”‚   â”‚   â””â”€â”€ ...                `build.py` copies the binaries &amp; jar built for Java into certain locations in this project, </div>
<div class="line">â”‚   â”‚   â”‚                          builds the AAR with gradle and copies the result back to the build folder.</div>
<div class="line">â”‚   â”‚   â””â”€â”€ windows              : NuGet package structure that is used by `build.py` to package the .NET 5 NuGet package.</div>
<div class="line">â”‚   â”‚       â”œâ”€â”€ MyDjinniLibrary.nuspec.template : Nuspec template that is populated with the project version from the `VERSION` file by `build.py`.</div>
<div class="line">â”‚   â”‚       â””â”€â”€ ...</div>
<div class="line">â”‚   â””â”€â”€ src                      : Finally! The source files of the library.</div>
<div class="line">â”‚       â””â”€â”€ ...</div>
<div class="line">â”œâ”€â”€ requirements.txt             : Python requirements for executing `build.py`</div>
<div class="line">â””â”€â”€ test                         : Folder containing the library unit tests.</div>
<div class="line">    â”œâ”€â”€ CMakeLists.txt           : `CMakeLists.txt` that configures the Unit tests with Catch2.</div>
<div class="line">    â””â”€â”€ ...</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
